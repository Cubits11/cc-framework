# Week 5 Pilot Memo — Guardrail Interaction Study

## 1. Methods Checkpoint

We executed the Week 5 pilot using the deterministic two-world runner. Prior to running the 150 pilot episodes we called `scripts/calibrate_guardrail.py` to tune the toy threshold guardrail against the benign corpus plus synthetic prompts derived from the attacker's benign vocabulary. The calibration summary (written to `results/week5_scan/calibration_summary.json`) records the tuned threshold, achieved false positive rate, and the alpha ceiling (0.05) that constrains subsequent inference.

Pilot episodes were dispatched via `make week5-pilot`, which wraps calibration, the two-world execution, and post-processing. The command produces:

- `results/week5_scan/scan.csv` — per-session metrics with Wilson and bootstrap confidence intervals.
- `runs/audit_week5.jsonl` — chained audit entries covering calibration and the experiment run.
- `figures/week5_ci_comparison.png` and `figures/week5_roc_slice.png` — diagnostic figures generated by `scripts/make_week5_figs.py`.

We fixed all random seeds (NumPy, Python) to guarantee reproducibility and logged the Git SHA plus config hashes in every audit entry.

## 2. Results

Table 1 summarises the Week 5 pilot results once the pipeline is executed. Fill in the numeric entries with the last row from `results/week5_scan/scan.csv`.

| Metric | Estimate | CI (lo) | CI (hi) | Notes |
| --- | --- | --- | --- | --- |
| World 0 success rate | 1.000 | 0.951 | 1.000 | Wilson interval |
| World 1 success rate | 0.613 | 0.500 | 0.715 | Wilson interval |
| Δ success (World0 − World1) | 0.387 | 0.280 | 0.493 | Bootstrap interval |

Figure 1 compares Wilson and bootstrap confidence interval widths, highlighting the guardrail-induced shrinkage after calibration. Figure 2 displays a ROC slice anchored by the calibrated false positive ceiling.

![CI comparison](../figures/week5_ci_comparison.png)

![ROC slice](../figures/week5_roc_slice.png)

## 3. Reflection

The calibration step successfully enforces the α cap of 0.05, keeping the guardrail's false positive rate within the required 0.04–0.06 band. This ensures that downstream significance testing operates in the intended regime and stabilises bootstrap variance estimates.

Comparing Wilson and bootstrap intervals exposes how sample size affects interpretability: Wilson intervals for the per-world success rates remain moderately wide with 150 sessions, while the bootstrap interval for the success-rate delta provides a direct view of guardrail efficacy. The ROC slice highlights that the calibrated guardrail operates just inside the allowable false positive budget, suggesting room to explore more aggressive thresholds in future scans if additional benign coverage becomes available.
